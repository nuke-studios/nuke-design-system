{
  "_purpose": "Architecture patterns and key concepts",
  "_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "properties": {
      "_purpose": {
        "description": "Purpose of this file",
        "type": "string"
      },
      "items": {
        "items": {
          "properties": {
            "description": {
              "type": "string"
            },
            "details": {
              "type": "object"
            },
            "id": {
              "pattern": "^concept-[0-9]+$",
              "type": "string"
            },
            "title": {
              "type": "string"
            }
          },
          "required": [
            "id",
            "title"
          ],
          "type": "object"
        },
        "type": "array"
      }
    },
    "required": [
      "_purpose",
      "items"
    ],
    "type": "object"
  },
  "items": [
    {
      "id": "concept-1",
      "title": "Flat Architecture",
      "description": "Single-layer design: tokens defined once in tokens.scss, used directly in components. No component-specific variables. Each component has one .scss file with reset and base styles. All styling controlled via layer-first CSS tokens.",
      "details": {
        "concept": "Single-layer design: tokens defined once in tokens.scss, used directly in component SCSS",
        "no_abstraction": "No component-specific CSS variables (e.g., --button-bg). Components use design tokens directly (e.g., var(--control-background))",
        "single_file_per_component": "Each component has one .scss file containing reset and base styles",
        "token_styling": "All visual styles controlled via token overrides - no style attributes needed"
      }
    },
    {
      "id": "concept-2",
      "title": "Unit-Based Tokens",
      "description": "All dimensions derive from --unit (6px default) and --ratio (0.4 default). Change --unit to scale entire UI: 4px=compact, 6px=standard, 8px=spacious. Derived tokens: --control-height, layer-specific padding/gap/radius/border/background.",
      "details": {
        "base_values": {
          "--ratio": "0.4 (content fill - 0.4=airy, 0.5=balanced, 0.7=tight)",
          "--unit": "6px (base size - 4px=compact, 6px=standard, 8px=spacious)"
        },
        "core_principle": "All dimensions derive from --unit. Change --unit to scale entire UI proportionally.",
        "density_modes": {
          "compact": "--unit: 4px",
          "fluid": "--unit: clamp(4px, 0.5vw + 3px, 8px)",
          "spacious": "--unit: 8px",
          "standard": "--unit: 6px"
        },
        "derived_tokens": {
          "--control-height": "calc(var(--unit) * 6) - buttons, inputs",
          "--text-base": "calc(var(--control-height) * var(--ratio))",
          "--width-1/2/3": "unit × 40/80/128 - sidebar/content/max-width"
        }
      }
    },
    {
      "id": "concept-3",
      "title": "Build System",
      "description": "npm run build compiles SCSS to CSS and bundles TypeScript. Output: dist/core.css + dist/core.js. Source organized in four numbered folders: 1-shell, 2-layout, 3-component, 4-control.",
      "details": {
        "build_output": {
          "dist/core.css": "Bundled CSS (compiled from SCSS)",
          "dist/core.js": "Bundled web components"
        },
        "build_scripts": {
          "build": "npm run build - Compiles SCSS to CSS and bundles TypeScript"
        },
        "source_structure": {
          "core/1-shell/": "App frame (app-shell-sidebar, app-shell-stacked)",
          "core/2-layout/": "Page regions (area, section, toolbar, sidebar, header, footer, nav-*, grid)",
          "core/3-component/": "UI containers (accordion, toast, table, badge, tag, nav, a, code, img, ol, ul)",
          "core/4-control/": "Form elements (button, input, select, textarea, checkbox, radio, range, tabs, label)",
          "core/_mixins.scss": "Shared mixins (currently empty)",
          "core/core.scss": "SCSS entry point (imports tokens + all components)",
          "core/core.ts": "Web component exports",
          "core/tokens.scss": "Design tokens (--unit, layer tokens: --shell-*, --layout-*, --component-*, --control-*)"
        }
      }
    },
    {
      "id": "concept-4",
      "title": "Usage",
      "description": "Import core.css and core.js. Override CSS tokens on any container to change styles for all children. Works with any framework.",
      "details": {
        "customize_tokens": "Override CSS tokens on :root, body, or any container to cascade style changes to children",
        "import_css": "<link rel='stylesheet' href='dist/core.css'>",
        "import_js": "<script type='module' src='dist/core.js'></script>",
        "style_modes": "Set layer tokens (--shell-*, --layout-*, --component-*, --control-*) on any element to control all children"
      }
    },
    {
      "id": "concept-5",
      "title": "Frontend App",
      "description": "Svelte 5 documentation app in frontend/ folder. Two pages: Welcome (landing) and Components (showcase). Uses Nav.svelte for navigation, imports lib web components (<nuke-icon>, <nuke-tabs>, etc). Serves as dogfooding environment to test lib components."
    },
    {
      "id": "concept-6",
      "title": "4-Layer Architecture",
      "description": "Four layers matching folder structure: 1-shell (app frame - sidebar/stacked layouts), 2-layout (page regions - area, section, toolbar, nav-*), 3-component (UI containers - accordion, toast, table), 4-control (form elements - button, input, tabs). Each layer has independent tokens.",
      "details": {
        "layers": {
          "1-shell": "App frame - overall page structure",
          "2-layout": "Page regions - areas, sections, navigation",
          "3-component": "UI containers - accordions, toasts, tables",
          "4-control": "Form elements - buttons, inputs, selects"
        }
      }
    },
    {
      "id": "concept-7",
      "title": "Layer-First Token Naming",
      "description": "Tokens use layer-first naming: --shell-gap, --layout-padding, --component-border, --control-height. Each layer has: padding, gap, radius, border, background. No cascade between layers - each is independent.",
      "details": {
        "shell_tokens": "--shell-padding, --shell-gap, --shell-radius, --shell-border, --shell-background",
        "layout_tokens": "--layout-padding, --layout-gap, --layout-radius, --layout-border, --layout-background",
        "component_tokens": "--component-padding, --component-gap, --component-radius, --component-border, --component-background",
        "control_tokens": "--control-height, --control-height-small, --control-gap, --control-radius, --control-border, --control-border-bottom, --control-background"
      }
    },
    {
      "id": "concept-8",
      "title": "Block vs Island Mode",
      "description": "Two aesthetic modes controlled by layer tokens. Block mode (--*-gap: 1px, --*-radius: 0, --*-border: none): Japanese hairline aesthetic - body color shows through 1px gaps creating visual borders. Island mode (--*-gap: 5px+, --*-radius: 3px+, --*-border: 1px solid): floating card aesthetic - visible separation, rounded corners, explicit borders."
    },
    {
      "id": "concept-9",
      "title": "Control Padding Calculation",
      "description": "Controls (buttons, inputs, etc.) don't use padding tokens. Instead, padding is calculated from height and ratio: padding = control-height × (1 - ratio). This ensures consistent proportions across all control heights."
    }
  ]
}
