{
  "_purpose": "Defines the onion architecture pattern. Each layer wraps the previous. Reusable across projects.",
  "_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "properties": {
      "_purpose": {
        "type": "string"
      },
      "files": {
        "type": "object"
      },
      "flow": {
        "type": "object"
      },
      "layers": {
        "type": "array"
      },
      "operations": {
        "type": "object"
      }
    },
    "required": [
      "_purpose",
      "layers"
    ],
    "type": "object"
  },
  "layers": [
    {
      "level": 1,
      "name": "Data",
      "format": ".json files",
      "pattern": "One file = One purpose",
      "location": ".nuke/"
    },
    {
      "level": 2,
      "name": "Schema",
      "format": "Go structs with JSON tags",
      "pattern": "One type per file",
      "location": "internal/models/"
    },
    {
      "level": 3,
      "name": "Data Access",
      "format": "Go functions",
      "pattern": "Get, Save, Add, Remove per type",
      "location": "internal/data/"
    },
    {
      "level": 4,
      "name": "Service",
      "format": "Go methods exposed to frontend",
      "pattern": "One getter per type",
      "location": "internal/services/"
    },
    {
      "level": 5,
      "name": "API",
      "format": "JS wrapper functions",
      "pattern": "One function per service method",
      "location": "frontend/src/api/"
    },
    {
      "level": 6,
      "name": "Component",
      "format": "Svelte components",
      "pattern": "One component per file type",
      "location": "frontend/src/views/"
    }
  ],
  "files": {
    "ai-instructions.json": {
      "_purpose": "AI behavior guidelines - how AI should work on this project",
      "type": "array",
      "fields": [
        "id",
        "title",
        "description"
      ]
    },
    "architecture.json": {
      "_purpose": "System design pattern - reusable onion architecture definition",
      "type": "single_object",
      "fields": [
        "layers",
        "files",
        "operations",
        "flow"
      ]
    },
    "commands.json": {
      "_purpose": "Dev commands - what to run and why",
      "type": "array",
      "fields": [
        "id",
        "title",
        "run",
        "why"
      ]
    },
    "concepts.json": {
      "_purpose": "Architecture patterns and key concepts",
      "type": "array",
      "fields": [
        "id",
        "title",
        "description",
        "details"
      ]
    },
    "dependencies.json": {
      "_purpose": "Libraries and packages used",
      "type": "array",
      "fields": [
        "id",
        "title",
        "description"
      ]
    },
    "endpoints.json": {
      "_purpose": "API endpoints - method, path, description",
      "type": "array",
      "fields": [
        "id",
        "title",
        "method",
        "path",
        "description"
      ]
    },
    "ports.json": {
      "_purpose": "Dev server ports and URLs",
      "type": "array",
      "fields": [
        "id",
        "title",
        "port",
        "url"
      ]
    },
    "project.json": {
      "_purpose": "Project identity - who, what, why",
      "type": "single_object",
      "fields": [
        "title",
        "tagline",
        "type",
        "problem",
        "solution",
        "philosophy"
      ]
    },
    "stack.json": {
      "_purpose": "Tech stack - language, framework, tools",
      "type": "array",
      "fields": [
        "id",
        "title",
        "description"
      ]
    },
    "tasks.json": {
      "_purpose": "Work items with status tracking",
      "type": "array",
      "fields": [
        "id",
        "title",
        "status",
        "priority",
        "type",
        "description"
      ]
    },
    "workflows.json": {
      "_purpose": "Step-by-step processes triggered by events",
      "type": "array",
      "fields": [
        "id",
        "title",
        "trigger",
        "steps"
      ]
    }
  },
  "operations": {
    "array": [
      "Get",
      "Save",
      "Add",
      "Remove"
    ],
    "key_value": [
      "Get",
      "Save",
      "AddItem"
    ],
    "single_object": [
      "Get",
      "Save"
    ]
  },
  "flow": {
    "read": "JSON → Schema → Get() → Service → API → Component",
    "refresh": "JSON change → fsnotify → Event → Component reload",
    "write": "Command → Add/Save() → JSON"
  }
}